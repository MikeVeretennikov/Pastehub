{% extends "base.html" %}

{% load i18n %}
{% load static %}

{% block content %}
    <style>
        .profile-card {
            padding: 20px; /* –û—Ç—Å—Ç—É–ø—ã –≤–Ω—É—Ç—Ä–∏ –∫–∞—Ä—Ç–æ—á–∫–∏ */
            margin-bottom: 20px;
            text-align: center; /* –í—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –ø–æ —Ü–µ–Ω—Ç—Ä—É */
            background-color: #ffffff; /* –¶–≤–µ—Ç —Ñ–æ–Ω–∞ */
        }

        .profile-avatar {
            width: 100px;
            height: 100px;
            border-radius: 50%; /* –ö—Ä—É–≥–ª–∞—è –∞–≤–∞—Ç–∞—Ä–∫–∞ */
            margin-bottom: 15px; /* –û—Ç—Å—Ç—É–ø –ø–æ–¥ –∞–≤–∞—Ç–∞—Ä–∫–æ–π */
        }
    </style>
    <div class="container p-3">
        <div class="container mt-5">
            <div class="profile-card">
                <img src="{% if user.image %}{{ user.image.url }}{% else %}{% static 'img/anonymous-user.jpg' %}{% endif %}" alt="" class="profile-avatar">
                <h3>{% translate '–°–ø–∏—Å–æ–∫ –ø–∞—Å—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è' %} {{ user.username }}</h3>
            </div>
        </div>
        {% if page_obj %}
        {%if user == request.user %}
        <button class="btn btn-sm btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-save-fill" viewBox="0 0 16 16">
                <path d="M8.5 1.5A1.5 1.5 0 0 1 10 0h4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h6c-.314.418-.5.937-.5 1.5v7.793L4.854 6.646a.5.5 0 1 0-.708.708l3.5 3.5a.5.5 0 0 0 .708 0l3.5-3.5a.5.5 0 0 0-.708-.708L8.5 9.293z"/>
            </svg>
            –°–æ–∑–¥–∞—Ç—å backup —Å–≤–æ–∏—Ö –∑–∞–º–µ—Ç–æ–∫
        </button>
        <ul class="dropdown-menu">
            <a class="dropdown-item" href="{% url 'users:backup' user.username "source" %}" download role="button">
                –ò—Å—Ö–æ–¥–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç
            </a>
            <a class="dropdown-item" href="{% url 'users:backup' user.username "json" %}" download role="button">
                JSON
            </a>
            <a class="dropdown-item" href="{% url 'users:backup' user.username "md" %}" download role="button">
                Markdown
            </a>
        </ul>
        {% endif %}
            <table class="table table-bordered table-striped">
                <thead class="thead-dark">
                    <tr>
                        <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                        <th>–°–æ–∑–¥–∞–Ω</th>
                        <th>–ò—Å—Ç–µ–∫–∞–µ—Ç</th>
                        <th>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</th>
                        <th>Syntax</th>
                    </tr>
                </thead>
                <tbody>

                    {% for paste in page_obj %}
                        <tr>
                        <td><a href="{% url 'paste:detail' paste.short_link %}">{{ paste.title }}</a></td>
                        <td>{{ paste.created }}</td>
                        <td>{{ paste.created|add:paste.expired_duration }}</td>
                        <td>{{ paste.category }}</td>
                        <td>{{ paste.language }}</td>
                    </tr>
                    {% endfor %}

                </tbody>
            </table>
        {% else %}
        <div class="container d-flex justify-content-center mt-5">
            <h5>–£ {{user.username}} –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ...üòû</h5>
        </div>
        {% endif %}
    </div>
    {% if page_obj.has_other_pages %}
        <div class="container d-flex justify-content-center mt-5">
        <nav aria-label="Page navigation">
            <ul class="pagination">
            {% if page_obj.has_previous %}
                <li class="page-item">
                <a class="page-link" href="?page={{ page_obj.previous_page_number }}">{% translate '–ü—Ä–µ–¥—ã–¥—É—â–∞—è' %}</a>
                </li>
            {% endif %}
            {% for index_page in list_pages %}
                <li class={% if index_page == page_obj.number %}"page-item active" aria-current="page"{% else %}"page-item"
                {% endif %}><a class="page-link" href="?page={{ index_page }}">{{ index_page }}</a></li>
            {% endfor %}
            {% if page_obj.has_next %}
                <li class="page-item"><a class="page-link" href="?page={{ page_obj.next_page_number }}">–°–ª–µ–¥—É—é—â–∞—è</a>
                </li>
            {% endif %}
            </ul>
        </nav>
        </div>
    {% endif %}
  </div>
{% endblock %}